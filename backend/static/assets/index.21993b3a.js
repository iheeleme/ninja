var e=Object.defineProperty,a=Object.defineProperties,t=Object.getOwnPropertyDescriptors,o=Object.getOwnPropertySymbols,s=Object.prototype.hasOwnProperty,r=Object.prototype.propertyIsEnumerable,n=(a,t,o)=>t in a?e(a,t,{enumerable:!0,configurable:!0,writable:!0,value:o}):a[t]=o,l=(e,a)=>{for(var t in a||(a={}))s.call(a,t)&&n(e,t,a[t]);if(o)for(var t of o(a))r.call(a,t)&&n(e,t,a[t]);return e},c=(e,o)=>a(e,t(o));import{p as i,a as d,o as m,c as u,r as p,b as f,d as k,F as g,k as y,u as h,e as v,f as b,g as w,t as P,h as j,w as _,i as C,_ as A,j as x,l as L,m as I,n as V,q as U,s as S,v as R,x as N,y as O,z as q,A as Q,B as D}from"./vendor.68d2e1ad.js";i("data-v-4b23e37a"),d();const z={},B={class:"NinjaLogo",src:"/assets/logo.03d6d6da.png",alt:"logo"};z.render=function(e,a){return m(),u("img",B)};const E={components:{Logo:z}};i("data-v-1f23ce5f");const K={class:"header"},$={class:"header-wrapper"},T={class:"flex items-center"},Z=f("p",{class:"pl-3 select-none"},"Ninja",-1);d(),E.render=function(e,a,t,o,s,r){const n=p("Logo");return m(),u("div",K,[f("div",$,[f("div",T,[k(n,{class:"h-10 w-10"}),Z])])])},E.__scopeId="data-v-1f23ce5f";const J={class:"main"},W={setup:e=>(e,a)=>{const t=p("router-view");return m(),u(g,null,[k(E),f("div",J,[k(t)])],64)}};const F=y.create({prefixUrl:"/api",retry:{limit:0}});const H={setup(){const e=h();v();let a=b({nickName:void 0,timestamp:void 0,form:{remark:"",token:"",type:"PLUS"}});const t=async()=>{try{const e=localStorage.getItem("eid");if(!e)return void o();const t=await function(e){const a=new URLSearchParams;return a.set("eid",e),F.get("userinfo",{searchParams:a}).json()}(e);if(!t)return A.error("获取用户信息失败，请重重新登录"),void o();a.nickName=t.data.nickName,a.timestamp=new Date(t.data.timestamp).toLocaleString(),a.form.token=t.data.token,a.form.remark=t.data.remark,a.form.type=t.data.type}catch(e){console.error(e)}};w(t);const o=()=>{localStorage.removeItem("eid"),e.push("/login")};return c(l({},P(a)),{activity:[{name:"玩一玩（可找到大多数活动）",address:"京东 APP 首页-频道-边玩边赚",href:"https://funearth.m.jd.com/babelDiy/Zeus/3BB1rymVZUo4XmicATEUSDUgHZND/index.html"},{name:"宠汪汪",address:"京东APP-首页/玩一玩/我的-宠汪汪"},{name:"东东萌宠",address:"京东APP-首页/玩一玩/我的-东东萌宠"},{name:"东东农场",address:"京东APP-首页/玩一玩/我的-东东农场"},{name:"东东工厂",address:"京东APP-首页/玩一玩/我的-东东工厂"},{name:"东东超市",address:"京东APP-首页/玩一玩/我的-东东超市"},{name:"领现金",address:"京东APP-首页/玩一玩/我的-领现金"},{name:"东东健康社区",address:"京东APP-首页/玩一玩/我的-东东健康社区"},{name:"京喜农场",address:"京喜APP-我的-京喜农场"},{name:"京喜牧场",address:"京喜APP-我的-京喜牧场"},{name:"京喜工厂",address:"京喜APP-我的-京喜工厂"},{name:"京喜财富岛",address:"京喜APP-我的-京喜财富岛"},{name:"京东极速版红包",address:"京东极速版APP-我的-红包"}],getInfo:t,logout:o,delAccount:async()=>{try{const e=localStorage.getItem("eid"),a=await function(e){return F.post("delaccount",{json:e}).json()}({eid:e});200!==a.code?A.error(a.message):(A.success(a.message),setTimeout((()=>{o()}),1e3))}catch(e){console.error(e)}},openUrlWithJD:e=>{const a=encodeURIComponent(`{"category":"jump","des":"m","action":"to","url":"${e}"}`);window.location.href=`openapp.jdmobile://virtual?params=${a}`,console.log(window.location.href)},updateRemark:async()=>{try{const e=localStorage.getItem("eid"),t=await function(e){return F.post("update/remark",{json:e}).json()}({eid:e,remark:a.form.remark,push_token:a.form.token,type:a.form.type});t.message?A.success(t.message):A.error("更新失败")}catch(e){console.error(e)}}})}},X={class:"content"},G={class:"card"},M=f("div",{class:"card-header"},[f("p",{class:"card-title"},"个人中心")],-1),Y={class:"card-body"},ee={class:"card-footer"},ae=x("退出登录"),te=x("删除账号"),oe={class:"card"},se=f("div",{class:"card-header"},[f("p",{class:"card-title"},"信息配置"),f("span",{class:"card-subtitle"},"用户识别信息及推送配置")],-1),re={class:"card-body"},ne=x("公众号"),le=x("APP"),ce=x("提交"),ie={class:"card"},de=f("div",{class:"card-header"},[f("p",{class:"card-title"},"推送token获取说明")],-1),me={class:"card-body"},ue=f("h1",{class:"card-subtitle"},"微信推送方式",-1),pe=f("p",null,[x(" 1、扫码关注公众号，发送token。 "),f("br"),x("2、复制返回内容，填入推送token，提交。 ")],-1),fe=f("hr",null,null,-1),ke=f("h1",{class:"card-subtitle"},"APP推送方式",-1),ge=f("p",null,[x("1、仅限iPhone设备"),f("br"),x(" 2、安装APP获取token后填入token ")],-1),ye={class:"card"},he=f("div",{class:"card-header"},[f("p",{class:"card-title"},"常见活动位置"),f("span",{class:"card-subtitle"},"下面是一些常见活动的位置")],-1),ve={class:"card-body"},be={class:"pr-2"},we=["onClick"];H.render=function(e,a,t,o,s,r){const n=p("el-button"),l=p("el-input"),c=p("el-form-item"),i=p("el-radio"),d=p("el-radio-group"),y=p("el-form"),h=p("el-image");return m(),u("div",X,[f("div",G,[M,f("div",Y,[f("p",null,"昵称："+j(e.nickName),1),f("p",null,"更新时间："+j(e.timestamp),1)]),f("div",ee,[k(n,{size:"small",auto:"",onClick:o.logout},{default:_((()=>[ae])),_:1},8,["onClick"]),k(n,{type:"danger",size:"small",auto:"",onClick:o.delAccount},{default:_((()=>[te])),_:1},8,["onClick"])])]),f("div",oe,[se,f("div",re,[k(y,{model:e.form,"label-width":"80px"},{default:_((()=>[k(c,{label:"备注"},{default:_((()=>[k(l,{modelValue:e.form.remark,"onUpdate:modelValue":a[0]||(a[0]=a=>e.form.remark=a)},null,8,["modelValue"])])),_:1}),k(c,{label:"推送token"},{default:_((()=>[k(l,{modelValue:e.form.token,"onUpdate:modelValue":a[1]||(a[1]=a=>e.form.token=a)},null,8,["modelValue"])])),_:1}),k(c,{label:"推送方式"},{default:_((()=>[k(d,{modelValue:e.form.type,"onUpdate:modelValue":a[2]||(a[2]=a=>e.form.type=a)},{default:_((()=>[k(i,{label:"PLUS"},{default:_((()=>[ne])),_:1}),k(i,{label:"BARK"},{default:_((()=>[le])),_:1})])),_:1},8,["modelValue"])])),_:1}),k(c,null,{default:_((()=>[k(n,{type:"primary",onClick:a[3]||(a[3]=e=>o.updateRemark())},{default:_((()=>[ce])),_:1})])),_:1})])),_:1},8,["model"])])]),f("div",ie,[de,f("div",me,[ue,pe,k(h,{src:"https://tva1.sinaimg.cn/large/008i3skNgy1gtiqs2hg88j60by0by3yx02.jpg",style:{width:"600px",height:"600px"},fit:e.fit},null,8,["fit"]),k(h,{style:{width:"300px"},src:"https://tva1.sinaimg.cn/large/008i3skNgy1gtiqbbfhuoj60u01t0q4j02.jpg",fit:e.fit},null,8,["fit"]),fe,ke,ge])]),f("div",ye,[he,f("div",ve,[f("ul",null,[(m(!0),u(g,null,C(o.activity,((e,a)=>(m(),u("li",{key:a,class:"leading-normal"},[f("span",null,j(e.name)+"：",1),f("span",be,j(e.address),1),e.href?(m(),u("a",{key:0,class:"text-blue-400",href:"#",onClick:a=>o.openUrlWithJD(e.href)},"直达链接",8,we)):L("",!0)])))),128))])])])])};const Pe={setup(){const e=h();v();let a=b({marginCount:0,allowAdd:!0,cookie:"",QRCode:void 0,qrCodeVisibility:!1,token:void 0,okl_token:void 0,cookies:void 0,timer:void 0,waitLogin:!1});const t=async()=>{try{const e=(await F.get("info").json()).data;a.marginCount=e.marginCount,a.allowAdd=e.allowAdd}catch(e){console.error(e)}},o=async()=>{try{const e=await F.get("qrcode").json();a.token=e.data.token,a.okl_token=e.data.okl_token,a.cookies=e.data.cookies,a.QRCode=e.data.QRCode,a.QRCode&&(a.waitLogin=!0,clearInterval(a.timer),a.timer=setInterval(s,3e3))}catch(e){console.error(e),A.error("生成二维码失败！请重试或放弃")}},s=async()=>{try{const t=await function(e){return F.post("check",{json:e}).json()}({token:a.token,okl_token:a.okl_token,cookies:a.cookies});switch(null==t?void 0:t.data.errcode){case 0:localStorage.setItem("eid",t.data.eid),A.success(t.message),clearInterval(a.timer),e.push("/");break;case 176:break;default:A.error(t.message),a.waitLogin=!1,clearInterval(a.timer)}}catch(t){clearInterval(a.timer),a.waitLogin=!1}};return w((()=>{t(),o()})),c(l({},P(a)),{getInfo:t,getQrcode:o,showQrcode:async()=>{a.qrCodeVisibility=!0},ckeckLogin:s,jumpLogin:async()=>{const e=`openapp.jdmobile://virtual/ad?params={"category":"jump","des":"ThirdPartyLogin","action":"to","onekeylogin":"return","url":"https://plogin.m.jd.com/cgi-bin/m/tmauth?appid=300&client_type=m&token=${a.token}","authlogin_returnurl":"weixin://","browserlogin_fromurl":"${window.location.host}"}`;window.location.href=e},CKLogin:async()=>{try{const e=a.cookie.match(/pt_key=(.*?);/)&&a.cookie.match(/pt_key=(.*?);/)[1],t=a.cookie.match(/pt_pin=(.*?);/)&&a.cookie.match(/pt_pin=(.*?);/)[1];if(e&&t){const a=await function(e){return F.post("cklogin",{json:e}).json()}({pt_key:e,pt_pin:t});200===a.code&&a.data.eid?(localStorage.setItem("eid",a.data.eid),A.success(a.message)):A.error(a.message||"cookie 解析失败，请检查后重试！")}else A.error("cookie 解析失败，请检查后重试！")}catch(e){console.error(e)}}})}},je={class:"content"},_e={class:"card"},Ce={class:"card-header"},Ae={class:"flex items-center justify-between"},xe=f("p",{class:"card-title"},"扫码登录",-1),Le={class:"ml-2 px-2 py-1 bg-gray-200 rounded-full font-normal text-xs"},Ie=f("span",{class:"card-subtitle"}," 请点击下方按钮登录，点击按钮后回到本网站查看是否登录成功，京东的升级提示不用管。 ",-1),Ve={class:"card-body text-center"},Ue={key:0,class:"flex flex-col w-48 m-auto mt-4"},Se=x("扫描二维码登录"),Re=x("跳转到京东 App 登录"),Ne=["src"],Oe=f("div",{class:"card-footer"},null,-1),qe={class:"card hidden"},Qe={class:"card-header"},De={class:"flex items-center justify-between"},ze=f("p",{class:"card-title"},"CK 登录",-1),Be={class:"ml-2 px-2 py-1 bg-gray-200 rounded-full font-normal text-xs"},Ee=f("span",{class:"card-subtitle"}," 请在下方输入您的 cookie 登录。 ",-1),Ke={class:"card-body text-center"},$e=x("登录"),Te=f("div",{class:"card-footet"},null,-1);Pe.render=function(e,a,t,o,s,r){const n=p("el-button"),l=p("el-input");return m(),u("div",je,[f("div",_e,[f("div",Ce,[f("div",Ae,[xe,f("span",Le,"余量："+j(e.marginCount),1)]),Ie]),f("div",Ve,[e.qrCodeVisibility?(m(),u("img",{key:1,src:e.QRCode,width:256,class:"m-auto"},null,8,Ne)):(m(),u("div",Ue,[k(n,{type:"primary",round:"",onClick:o.showQrcode},{default:_((()=>[Se])),_:1},8,["onClick"]),k(n,{class:"mt-4 ml-0",type:"primary",round:"",onClick:o.jumpLogin},{default:_((()=>[Re])),_:1},8,["onClick"])]))]),Oe]),f("div",qe,[f("div",Qe,[f("div",De,[ze,f("span",Be,"余量："+j(e.marginCount),1)]),Ee]),f("div",Ke,[k(l,{modelValue:e.cookie,"onUpdate:modelValue":a[0]||(a[0]=a=>e.cookie=a),size:"small",clearable:"",class:"my-4 w-full"},null,8,["modelValue"]),k(n,{type:"primary",size:"small",round:"",onClick:o.CKLogin},{default:_((()=>[$e])),_:1},8,["onClick"])]),Te])])};const Ze=[{path:"/",component:H},{path:"/login",component:Pe}],Je=I({history:V(),routes:Ze}),We=[S,R,N,O,q,A,Q,D],Fe=[A],He=U(W);We.forEach((e=>{He.component(e.name,e)})),Fe.forEach((e=>{He.use(e)})),He.use(Je),He.mount("#app");
