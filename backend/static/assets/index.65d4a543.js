var e=Object.defineProperty,a=Object.defineProperties,t=Object.getOwnPropertyDescriptors,o=Object.getOwnPropertySymbols,s=Object.prototype.hasOwnProperty,l=Object.prototype.propertyIsEnumerable,r=(a,t,o)=>t in a?e(a,t,{enumerable:!0,configurable:!0,writable:!0,value:o}):a[t]=o,n=(e,a)=>{for(var t in a||(a={}))s.call(a,t)&&r(e,t,a[t]);if(o)for(var t of o(a))l.call(a,t)&&r(e,t,a[t]);return e},c=(e,o)=>a(e,t(o));import{p as i,a as d,o as m,c as u,r as p,b as f,d as g,F as h,k,u as y,e as v,f as b,g as w,t as P,h as j,w as _,i as C,_ as x,j as A,l as V,m as I,n as L,q as S,s as U,v as q,x as z,y as B,z as N,A as O,B as R,C as D,D as Q}from"./vendor.5b17fed0.js";i("data-v-4b23e37a"),d();const E={},F={class:"NinjaLogo",src:"/assets/logo.03d6d6da.png",alt:"logo"};E.render=function(e,a){return m(),u("img",F)};const $={components:{Logo:E}};i("data-v-1f23ce5f");const K={class:"header"},T={class:"header-wrapper"},Z={class:"flex items-center"},J=f("p",{class:"pl-3 select-none"},"Ninja",-1);d(),$.render=function(e,a,t,o,s,l){const r=p("Logo");return m(),u("div",K,[f("div",T,[f("div",Z,[g(r,{class:"h-10 w-10"}),J])])])},$.__scopeId="data-v-1f23ce5f";const W={class:"main"},H={setup:e=>(e,a)=>{const t=p("router-view");return m(),u(h,null,[g($),f("div",W,[g(t)])],64)}};const X=k.create({prefixUrl:"/api",retry:{limit:0}});const G={setup(){const e=y();v();let a=b({nickName:void 0,timestamp:void 0,form:{remark:"",token:"",type:"PLUS"}});const t=async()=>{try{const e=localStorage.getItem("eid");if(!e)return void o();const t=await function(e){const a=new URLSearchParams;return a.set("eid",e),X.get("userinfo",{searchParams:a}).json()}(e);if(!t)return x.error("获取用户信息失败，请重重新登录"),void o();a.nickName=t.data.nickName,a.timestamp=new Date(t.data.timestamp).toLocaleString(),a.form.token=t.data.token,a.form.remark=t.data.remark,a.form.type=t.data.type}catch(e){console.error(e)}};w(t);const o=()=>{localStorage.removeItem("eid"),e.push("/login")};return c(n({},P(a)),{activity:[{name:"玩一玩（可找到大多数活动）",address:"京东 APP 首页-频道-边玩边赚",href:"https://funearth.m.jd.com/babelDiy/Zeus/3BB1rymVZUo4XmicATEUSDUgHZND/index.html"},{name:"宠汪汪",address:"京东APP-首页/玩一玩/我的-宠汪汪"},{name:"东东萌宠",address:"京东APP-首页/玩一玩/我的-东东萌宠"},{name:"东东农场",address:"京东APP-首页/玩一玩/我的-东东农场"},{name:"东东工厂",address:"京东APP-首页/玩一玩/我的-东东工厂"},{name:"东东超市",address:"京东APP-首页/玩一玩/我的-东东超市"},{name:"领现金",address:"京东APP-首页/玩一玩/我的-领现金"},{name:"东东健康社区",address:"京东APP-首页/玩一玩/我的-东东健康社区"},{name:"京喜农场",address:"京喜APP-我的-京喜农场"},{name:"京喜牧场",address:"京喜APP-我的-京喜牧场"},{name:"京喜工厂",address:"京喜APP-我的-京喜工厂"},{name:"京喜财富岛",address:"京喜APP-我的-京喜财富岛"},{name:"京东极速版红包",address:"京东极速版APP-我的-红包"},{name:"京东赚赚",address:"微信小程序京东赚赚"},{name:"京东秒秒币",address:"京东首页-京东秒杀-立即签到领红包"}],getInfo:t,logout:o,delAccount:async()=>{try{const e=localStorage.getItem("eid"),a=await function(e){return X.post("delaccount",{json:e}).json()}({eid:e});200!==a.data.code?x.error(a.message):(x.success(a.message),setTimeout((()=>{o()}),1e3))}catch(e){console.error(e)}},openUrlWithJD:e=>{const a=encodeURIComponent(`{"category":"jump","des":"m","action":"to","url":"${e}"}`);window.location.href=`openapp.jdmobile://virtual?params=${a}`,console.log(window.location.href)},updateRemark:async()=>{try{const e=localStorage.getItem("eid"),t=await function(e){return X.post("update/remark",{json:e}).json()}({eid:e,remark:a.form.remark,push_token:a.form.token,type:a.form.type});t.message?x.success(t.message):x.error("更新失败")}catch(e){console.error(e)}}})}},M={class:"content"},Y={class:"card"},ee=f("div",{class:"card-header"},[f("p",{class:"card-title"},"个人中心")],-1),ae={class:"card-body"},te={class:"card-footer"},oe=A("退出登录"),se=A("删除账号"),le={class:"card"},re=f("div",{class:"card-header"},[f("p",{class:"card-title"},"信息配置"),f("span",{class:"card-subtitle"},"用户识别信息及推送配置")],-1),ne={class:"card-body"},ce=A("公众号"),ie=A("APP"),de=A("提交"),me={class:"card"},ue=f("div",{class:"card-header"},[f("p",{class:"card-title"},"推送token获取说明")],-1),pe={class:"card-body"},fe=f("h1",{class:"card-subtitle"},"微信推送方式",-1),ge=f("p",null,[A(" 1、扫码关注公众号，发送token。 "),f("br"),A("2、复制返回内容，填入推送token，提交。 ")],-1),he=f("hr",null,null,-1),ke=f("h1",{class:"card-subtitle"},"APP推送方式",-1),ye=f("p",null,[A("1、仅限iPhone设备"),f("br"),A(" 2、安装APP获取token后填入token ")],-1),ve={class:"card"},be=f("div",{class:"card-header"},[f("p",{class:"card-title"},"常见活动位置"),f("span",{class:"card-subtitle"},"下面是一些常见活动的位置")],-1),we={class:"card-body"},Pe={class:"pr-2"},je=["onClick"];G.render=function(e,a,t,o,s,l){const r=p("el-button"),n=p("el-input"),c=p("el-form-item"),i=p("el-radio"),d=p("el-radio-group"),k=p("el-form"),y=p("el-image");return m(),u("div",M,[f("div",Y,[ee,f("div",ae,[f("p",null,"昵称："+j(e.nickName),1),f("p",null,"更新时间："+j(e.timestamp),1)]),f("div",te,[g(r,{size:"small",auto:"",onClick:o.logout},{default:_((()=>[oe])),_:1},8,["onClick"]),g(r,{type:"danger",size:"small",auto:"",onClick:o.delAccount},{default:_((()=>[se])),_:1},8,["onClick"])])]),f("div",le,[re,f("div",ne,[g(k,{model:e.form,"label-width":"80px"},{default:_((()=>[g(c,{label:"备注"},{default:_((()=>[g(n,{modelValue:e.form.remark,"onUpdate:modelValue":a[0]||(a[0]=a=>e.form.remark=a)},null,8,["modelValue"])])),_:1}),g(c,{label:"推送token"},{default:_((()=>[g(n,{modelValue:e.form.token,"onUpdate:modelValue":a[1]||(a[1]=a=>e.form.token=a)},null,8,["modelValue"])])),_:1}),g(c,{label:"推送方式"},{default:_((()=>[g(d,{modelValue:e.form.type,"onUpdate:modelValue":a[2]||(a[2]=a=>e.form.type=a)},{default:_((()=>[g(i,{label:"PLUS"},{default:_((()=>[ce])),_:1}),g(i,{label:"BARK"},{default:_((()=>[ie])),_:1})])),_:1},8,["modelValue"])])),_:1}),g(c,null,{default:_((()=>[g(r,{type:"primary",onClick:a[3]||(a[3]=e=>o.updateRemark())},{default:_((()=>[de])),_:1})])),_:1})])),_:1},8,["model"])])]),f("div",me,[ue,f("div",pe,[fe,ge,g(y,{src:"https://tva1.sinaimg.cn/large/008i3skNgy1gtiqs2hg88j60by0by3yx02.jpg",style:{width:"600px",height:"600px"},fit:e.fit},null,8,["fit"]),g(y,{style:{width:"300px"},src:"https://tva1.sinaimg.cn/large/008i3skNgy1gtiqbbfhuoj60u01t0q4j02.jpg",fit:e.fit},null,8,["fit"]),he,ke,ye])]),f("div",ve,[be,f("div",we,[f("ul",null,[(m(!0),u(h,null,C(o.activity,((e,a)=>(m(),u("li",{key:a,class:"leading-normal"},[f("span",null,j(e.name)+"：",1),f("span",Pe,j(e.address),1),e.href?(m(),u("a",{key:0,class:"text-blue-400",href:"#",onClick:a=>o.openUrlWithJD(e.href)},"直达链接",8,je)):V("",!0)])))),128))])])])])};const _e={setup(){const e=I(null),a=y();v();let t=b({marginCount:0,allowAdd:!0,cookie:"",QRCode:void 0,qrCodeVisibility:!1,token:void 0,okl_token:void 0,cookies:void 0,timer:void 0,waitLogin:!1,valiBtn:"获取验证码",form:{phone:"",code:""},disabled:!1});const o=b({phone:[{validator:(e,a,t)=>{if(/^0?(13[0-9]|15[012356789]|18[0-9]|14[578]|16[6]|17[035768]|19[19])[0-9]{8}$/.test(a))return t();t("请输入合法的手机号")},required:!0,trigger:"blur"}],code:[{required:!0,message:"请输入验证码",trigger:"blur"}]}),s=async()=>{try{const e=(await X.get("info").json()).data;t.marginCount=e.marginCount,t.allowAdd=e.allowAdd}catch(e){console.error(e)}},l=a=>new Promise((t=>{e.value.validateField(a,(e=>{t(""===e)}))})),r=async()=>{let e=60,a=setInterval((()=>{0==e?(clearInterval(a),t.valiBtn="获取验证码",t.disabled=!1):(t.disabled=!0,t.valiBtn=e+"秒后重试",e--)}),1e3)},i=async()=>{if(localStorage.getItem("eid"))a.push("/");else try{const e=await function(e){return X.post("check",{json:e}).json()}({token:t.token,okl_token:t.okl_token,cookies:t.cookies});switch(null==e?void 0:e.data.errcode){case 0:localStorage.setItem("eid",e.data.eid),x.success(e.message),clearInterval(t.timer),a.push("/");break;case 176:break;default:x.error(e.message),t.waitLogin=!1,clearInterval(t.timer)}}catch(e){clearInterval(t.timer),t.waitLogin=!1}},d=async()=>{try{const e=t.cookie.match(/pt_key=(.*?);/)&&t.cookie.match(/pt_key=(.*?);/)[1],o=t.cookie.match(/pt_pin=(.*?);/)&&t.cookie.match(/pt_pin=(.*?);/)[1];if(e&&o){const t=await function(e){return X.post("cklogin",{json:e}).json()}({pt_key:e,pt_pin:o});t.data.eid?(localStorage.setItem("eid",t.data.eid),x.success(t.message),a.push("/")):x.error(t.message||"cookie 解析失败，请检查后重试！")}else x.error("cookie 解析失败，请检查后重试！")}catch(e){console.error(e)}};return w((()=>{s(),i()})),c(n({},P(t)),{getInfo:s,getQrcode:async()=>{try{const e=await X.get("qrcode").json();t.token=e.data.token,t.okl_token=e.data.okl_token,t.cookies=e.data.cookies,t.QRCode=e.data.QRCode,t.QRCode&&(t.waitLogin=!0,clearInterval(t.timer),t.timer=setInterval(i,3e3))}catch(e){console.error(e),x.error("生成二维码失败！请重试或放弃")}},showQrcode:async()=>{t.qrCodeVisibility=!0},ckeckLogin:i,jumpLogin:async()=>{const e=`openapp.jdmobile://virtual/ad?params={"category":"jump","des":"ThirdPartyLogin","action":"to","onekeylogin":"return","url":"https://plogin.m.jd.com/cgi-bin/m/tmauth?appid=300&client_type=m&token=${t.token}","authlogin_returnurl":"weixin://","browserlogin_fromurl":"${window.location.host}"}`;window.location.href=e},CKLogin:d,getCode:async()=>{try{if(""===t.form.phone)return x.error("请输入手机号"),!1;if(!(await l("phone")))return!1;{const e=await function(e){return X.post("phonesend",{json:e}).json()}({phone:t.form.phone});200===e.data.status?(x.success(e.message),r()):x.error(e.message)}}catch(e){console.error(e)}},onSubmit:async()=>{const a=L(e);if(a)try{await a.validate();const e=await function(e){return X.post("phonelogin",{json:e}).json()}({phone:t.form.phone,code:t.form.code});200===e.data.status?(x.success(e.message),t.cookie=e.data.cookie,d()):x.error(e.message)}catch(o){console.log(o)}},tackBtn:r,rules:o,formValidateField:l,ruleFormsss:e})}};i("data-v-646c8133");const Ce={class:"content"},xe={class:"card"},Ae={class:"card-header"},Ve={class:"flex items-center justify-between"},Ie=f("p",{class:"card-title"},"登录",-1),Le={class:"ml-2 px-2 py-1 bg-gray-200 rounded-full font-normal text-xs"},Se=f("span",{class:"card-subtitle"},[A("请点击下方按钮获取验证码登录,获取验证码时间较长（3～10s），请耐心等待！ "),f("h1",{class:"title"},"获取验证码按钮只能点一次！"),f("h1",{class:"title"},"获取验证码按钮只能点一次！"),f("h1",{class:"title"},"获取验证码按钮只能点一次！"),A(" 响应会有延迟，多次点击验证码重复发送导致登录失败！ ")],-1),Ue={class:"card-body"},qe=A("登录"),ze=f("div",{class:"card-footer"},null,-1),Be={class:"card hidden"},Ne={class:"card-header"},Oe={class:"flex items-center justify-between"},Re=f("p",{class:"card-title"},"CK 登录",-1),De={class:"ml-2 px-2 py-1 bg-gray-200 rounded-full font-normal text-xs"},Qe=f("span",{class:"card-subtitle"},"请在下方输入您的 cookie 登录。",-1),Ee={class:"card-body text-center"},Fe=A("登录"),$e=f("div",{class:"card-footet"},null,-1);d(),_e.render=function(e,a,t,o,s,l){const r=p("el-input"),n=p("el-form-item"),c=p("el-button"),i=p("el-form");return m(),u("div",Ce,[f("div",xe,[f("div",Ae,[f("div",Ve,[Ie,f("span",Le,"余量："+j(e.marginCount),1)]),Se]),f("div",Ue,[g(i,{model:e.form,ref:"ruleFormsss",rules:o.rules,"label-width":"20%",style:{width:"80%"}},{default:_((()=>[g(n,{prop:"phone"},{default:_((()=>[g(r,{size:"small",placeholder:"手机号","suffix-icon":"el-icon-mobile-phone",maxlength:"11",modelValue:e.form.phone,"onUpdate:modelValue":a[0]||(a[0]=a=>e.form.phone=a)},null,8,["modelValue"])])),_:1}),g(n,{prop:"code"},{default:_((()=>[g(r,{style:{width:"200px"},type:"text",maxlength:"6",size:"small","suffix-icon":"el-icon-lock",placeholder:"验证码",modelValue:e.form.code,"onUpdate:modelValue":a[1]||(a[1]=a=>e.form.code=a)},null,8,["modelValue"]),g(c,{size:"small",class:"btn-orange",disabled:e.disabled,onClick:o.getCode},{default:_((()=>[A(j(e.valiBtn),1)])),_:1},8,["disabled","onClick"])])),_:1}),g(n,null,{default:_((()=>[g(c,{type:"primary",size:"small",onClick:o.onSubmit},{default:_((()=>[qe])),_:1},8,["onClick"])])),_:1})])),_:1},8,["model","rules"])]),ze]),f("div",Be,[f("div",Ne,[f("div",Oe,[Re,f("span",De,"余量："+j(e.marginCount),1)]),Qe]),f("div",Ee,[g(r,{modelValue:e.cookie,"onUpdate:modelValue":a[2]||(a[2]=a=>e.cookie=a),size:"small",clearable:"",class:"my-4 w-full"},null,8,["modelValue"]),g(c,{type:"primary",size:"small",round:"",onClick:o.CKLogin},{default:_((()=>[Fe])),_:1},8,["onClick"])]),$e])])},_e.__scopeId="data-v-646c8133";const Ke=[{path:"/",component:G},{path:"/login",component:_e}],Te=S({history:U(),routes:Ke});Te.beforeEach(((e,a,t)=>{localStorage.getItem("eid")||"/login"===e.path?t():t({path:"/login"})}));const Ze=[z,B,N,O,R,x,D,Q],Je=[x],We=q(H);Ze.forEach((e=>{We.component(e.name,e)})),Je.forEach((e=>{We.use(e)})),We.use(Te),We.mount("#app");
